%!TEX root = ../WinkelmannCSL_SE_2016.tex
\tikzstyle{element}=[rectangle, thick,
                     inner sep=0.1cm, rounded corners]

\tikzstyle{robj}=[rectangle, thick, fill=robjblue,stroke=grey, text=white,
                  inner sep=0.1cm, rounded corners]

\tikzstyle{rfun}=[rectangle, thick, fill=rfungrey, text=black,
                  inner sep=0.1cm, rounded corners, text width=3.7cm]


\begin{tikzpicture}[scale=0.7]
  
  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  % hierarchy

  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  % nodes

  \draw[fill=gray, rounded corners] (-7,2.5) rectangle (7.8, -2.5);
  \node (wrassp) at (-6, 2.1) {wrassp};

  \draw[rounded corners, dashed] (-7.5,3) rectangle (8.3, -3);
  \node (R) at (-7.5,3) {\pgftext{\includegraphics[scale=0.03]{pics/RlogoNew}}};

  \node (ado) at (-4, 1) [robj] {\texttt{AsspDataObject}};
  \node (rwAdo)[] at (-4, -1) [rfun] {\small{\texttt{read.AsspDataObject()\\ write.AsspDataObject()}}};


  \node[text width=3cm] (dataFiles) at (0,-6) {
      \begin{tcolorbox}[%
          title={Data Files},
          width=\textwidth
      ]
      \begin{itemize}
      \itemsep-10pt
        \item WAV
        \item NIST
        \item AU
        \item SSFF
        \item ...
      \end{itemize}

      \end{tcolorbox}
  };


  \node[text width=5cm] (funs) at (4,0) {
      \begin{tcolorbox}[%
          title={Signal Proc. Functions},
          width=\textwidth
      ]
      \begin{itemize}
      \itemsep-10pt
        % \item \texttt{wrassp::acfana()}
        % \item \texttt{wrassp::afdiff()}
        % \item \texttt{wrassp::affilter()}
        % \item \texttt{wrassp::cepstrum()}
        % \item \texttt{wrassp::cssSpectrum()}
        \item ...
        \item \texttt{dftSpectrum()}
        \item \texttt{forest()}
        \item \texttt{ksvF0()}
        \item ...
        % \item \texttt{wrassp::lpsSpectrum()}
        % \item \texttt{wrassp::mhsF0()}
        % \item \texttt{wrassp::rfcana()}
        % \item \texttt{wrassp::rmsana()}
        % \item \texttt{wrassp::zcrana()}
      \end{itemize}

      \end{tcolorbox}
  };


  % \node (text) at (0, 0) [element] {};


  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  % links

  \draw [<->, line width=1] (rwAdo) to (dataFiles);
  \draw [<->, line width=1, white] (ado) to (rwAdo);

  \draw [<->, line width=1] (dataFiles.east) to [bend right=45] node[text width=3.4cm, xshift=2cm]{\small{\texttt{INPUT:} File Path(s)} \small{\texttt{OUTPUT:} Data File(s)}} (funs.south);

  \draw [->, line width=1, white] (funs.west) to node[rotate=90, text width=3cm, yshift=-0.3cm, xshift=-0.5cm]{\small{single file in-\\mem. outp.}} (ado.east);

  
  
\end{tikzpicture}
