% !Rnw root = ../diss.tex
\tikzstyle{element}=[rectangle,
                     inner sep=0.1cm, rounded corners, fill=white, fill opacity=0.7, text opacity=1]
\tikzstyle{input_el}=[rectangle, thick,
                     inner sep=0.1cm, rounded corners]

\tikzstyle{layer}=[rectangle, thick,
                     inner sep=0.1cm, fill=white, fill opacity=0.7, text opacity=1]

\begin{tikzpicture}

  % input
  \node[draw=black, text width=3.5cm] (sd) at (-4, 4) [input_el] {audio speech data \tiny{(non-optional)}};

  \node[draw=black, text width=4cm] (ad) at (0, 4) [input_el] {complementary data \tiny{(optional)}};

  \node[draw=black, text width=2.5cm] (an) at (4, 4) [input_el] {annotations \tiny{(optional)}};

  % pics
  \node [minimum width=6cm, minimum height=6cm](emusdms) at (0, 0) {\pgftext{\includegraphics[scale=0.2]{pics/EMU-webAppIcon-roundCorners}}};

  \node [minimum width=1.8cm, minimum height=1.8cm](emuDB) at (0, 0) {\pgftext{\includegraphics[scale=0.2]{pics/databaseSymbol}}};
  
  % overlay
  \node [draw=black, minimum width=4cm](input) at (0, 2.3) [layer] {import routines};

  \node [draw=black, minimum width=4cm](output) at (0, -2.3) [layer] {export routines};


  \node [rotate=30](el1) at (-2, 1.4) [element] {\small{annotate}};
  \node [rotate=-40](el2) at (-1.5, -1.0) [element] {\small{query annot.}};
  \node [rotate=-30](el3) at (1.4, 1.0) [element] {\small{extr. signal data}};
  \node [rotate=15](el4) at (1.6, -0.6) [element] {\small{analyze}};
  \node [rotate=-10](el5) at (1.9, -1.7) [element] {\small{visualize}};

  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  %
  \draw [->] (sd) -- (input);
  \draw [->] (ad) -- (input);
  \draw [->] (an) -- (input);

  \draw [->] (input) -- (emuDB);
  \draw [->] (emuDB) -- (output);
  
  \draw [->] (output) -- (-4, -4);
  \draw [->] (output) -- (0, -4);
  \draw [->] (output) -- (4, -4);
  
  \draw [dotted] (emuDB) -- (el1);
  \draw [dotted] (emuDB) -- (el2);
  \draw [dotted] (emuDB) -- (el3);
  \draw [dotted] (emuDB) -- (el4);
  \draw [dotted] (emuDB) -- (el5);
  
\end{tikzpicture}